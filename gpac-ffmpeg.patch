--- gpac/modules/ffmpeg_in/ffmpeg_in.h.orig	2008-10-20 13:04:40.000000000 +0200
+++ gpac/modules/ffmpeg_in/ffmpeg_in.h	2011-03-28 19:44:02.765729730 +0200
@@ -56,14 +56,14 @@
 
 
 /*include FFMPEG APIs*/
-#include <ffmpeg/avformat.h>
+#include <libavformat/avformat.h>
 
 void gf_av_vlog(void* avcl, int level, const char *fmt, va_list vl);
 
 
 #if LIBAVCODEC_VERSION_INT > ((52<<16)+(0<<8)+0)
 #define FFMPEG_SWSCALE
-#include <ffmpeg/swscale.h>
+#include <libswscale/swscale.h>
 #endif
 
 /*FFMPEG decoder module */
--- gpac/configure.orig	2011-03-27 21:38:49.493737273 +0200
+++ gpac/configure	2011-03-28 19:44:22.401729730 +0200
@@ -732,7 +732,7 @@ fi
 #look for FFMPEG support
 cat > $TMPC << EOF
 #include <stddef.h>
-#include <ffmpeg/avcodec.h>
+#include <libavcodec/avcodec.h>
 int main( void ) { return 0; }
 EOF
 
--- gpac/modules/ffmpeg_in/ffmpeg_decode.c.orig	2008-11-28 18:26:06.000000000 +0100
+++ gpac/modules/ffmpeg_in/ffmpeg_decode.c	2011-03-28 20:33:19.441729730 +0200
@@ -241,7 +241,7 @@
 
 	/*setup audio streams*/
 	if (ffd->st==GF_STREAM_AUDIO) {
-		if ((ffd->codec->type == CODEC_ID_MP3LAME) || (ffd->codec->type == CODEC_ID_MP2)) {
+		if ((ffd->codec->type == CODEC_ID_MP3) || (ffd->codec->type == CODEC_ID_MP2)) {
 			ffd->ctx->frame_size = (ffd->ctx->sample_rate > 24000) ? 1152 : 576;
 		}
 		/*may be 0 (cfg not known yet)*/
@@ -643,7 +643,7 @@
         	                NULL, NULL, NULL);
 			
 			if (ffd->sws_ctx)
-				sws_scale(ffd->sws_ctx, ffd->frame->data, ffd->frame->linesize, 0, ffd->ctx->height->codec->height, pict.data, pict.linesize);
+				sws_scale(ffd->sws_ctx, ffd->frame->data, ffd->frame->linesize, 0, ffd->ctx->height, pict.data, pict.linesize);
 
 #endif
 
